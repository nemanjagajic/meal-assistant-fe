(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{45301:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(76665)}])},38123:function(t,e,n){"use strict";n.d(e,{M:function(){return r}});var r,i=n(85893),o=(n(67294),n(11163));!function(t){t.HOME="home",t.ADD_FOOD="addFood"}(r||(r={}));e.Z=function(t){var e=t.activeTab,n=(0,o.useRouter)();return(0,i.jsxs)("nav",{className:"flex flex-row bg-teal-600 p-4",children:[(0,i.jsx)("div",{className:"text-white pl-2 pr-3 cursor-pointer ".concat(e===r.HOME&&"font-bold"),onClick:function(){return n.replace("/")},children:"Food"}),(0,i.jsx)("div",{className:"text-white pl-2 pr-3 cursor-pointer ".concat(e===r.ADD_FOOD&&"font-bold"),onClick:function(){return n.push("/addFood")},children:"Add food"})]})}},9145:function(t,e,n){"use strict";n.d(e,{u:function(){return b},M:function(){return v}});var r=n(34051),i=n.n(r),o=n(88767),a=n(9669),s=n.n(a),c={baseURL:"http://46.101.119.178:1337",responseType:"json"},u=function(t,e){Object.keys(e).forEach((function(n){t.defaults.headers[n]=e[n]}))},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=s().create(t),n=localStorage.getItem("token"),r={accept:"application/json",authorization:""};return n&&(r.authorization=n),u(e,r),e}();function d(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){d(o,r,i,a,s,"next",t)}function s(t){d(o,r,i,a,s,"throw",t)}a(void 0)}))}}var p="/api/foods",x=function(){var t=f(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.get(p);case 3:return e=t.sent,n=e.data,t.abrupt("return",n.data);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=f(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.post(p,e);case 3:return n=t.sent,r=n.data,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();function m(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}var v=function(){var t=(0,o.useQuery)("foods",x);return{data:t.data,error:t.error,isLoading:t.isLoading,isFetching:t.isFetching}},b=function(t){var e,n=(0,o.useQueryClient)(),r=(0,o.useMutation)(h,{onSuccess:(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.invalidateQueries("foods");case 2:null===t||void 0===t||t();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(t){m(o,r,i,a,s,"next",t)}function s(t){m(o,r,i,a,s,"throw",t)}a(void 0)}))})});return{mutate:r.mutate,isLoading:r.isLoading}}},76665:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var r=n(85893),i=n(9145),o=n(67294),a=n(48847),s=["name","size","kcal","p"],c=function(t){var e=t.foods,n=void 0===e?[]:e,i=t.handleFoodSelected,o=t.selectedFoods;return(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("div",{className:"overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,r.jsx)("div",{className:"py-2 inline-block min-w-full sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full",children:[(0,r.jsx)("thead",{className:"border-b",children:(0,r.jsx)("tr",{children:s.map((function(t){return(0,r.jsx)("th",{scope:"col",className:"text-sm font-medium text-gray-900 px-6 py-4 text-left",children:t},t)}))})}),(0,r.jsx)("tbody",{children:n.map((function(t){return(0,r.jsxs)("tr",{onClick:function(t){var e,n;return i(null===(e=t.target)||void 0===e||null===(n=e.parentNode)||void 0===n?void 0:n.id)},id:t.id.toString(),className:"".concat(o.find((function(e){return e.id==t.id}))?"bg-teal-100":"bg-white"," border-b cursor-pointer"),children:[(0,r.jsx)("td",{className:"text-sm text-gray-900 font-light pl-6 py-4 whitespace-nowrap font-bold text-gray-500",children:(0,a.W)(t.attributes.name,window.innerWidth<400?14:50)}),(0,r.jsx)("td",{className:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",children:t.attributes.portionSize}),(0,r.jsx)("td",{className:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",children:(0,a.I)(t.attributes.calories,Number.parseInt(t.attributes.portionSize)).toFixed(0)}),(0,r.jsx)("td",{className:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap",children:(0,a.I)(t.attributes.proteins,Number.parseInt(t.attributes.portionSize)).toFixed(1)})]},t.id)}))})]})})})})})},u=n(38123),l=n(23192),d=function(t){var e=t.selectedCategory,n=t.setSelectedCategory,i=t.searchText,o=t.setSearchText,a=function(t){n(t),o("")};return(0,r.jsx)("div",{className:"flex items-center justify-center p-4 bg-white",children:(0,r.jsxs)("div",{className:"flex border-2 rounded w-full md:w-96",children:[(0,r.jsx)("input",{onChange:function(t){return o(t.target.value)},value:i,type:"text",className:"px-4 py-2 focus:outline-none w-full",placeholder:"Search..."}),(0,r.jsx)("button",{className:"flex items-center justify-center px-4 border-l",onClick:function(){return a(l.a.BREAKFAST)},children:(0,r.jsx)("div",{className:"".concat(e===l.a.BREAKFAST?"text-teal-600":"text-stone-400"," font-bold"),children:"B"})}),(0,r.jsx)("button",{className:"flex items-center justify-center px-4 border-l",onClick:function(){return a(l.a.MAIN)},children:(0,r.jsx)("div",{className:"".concat(e===l.a.MAIN?"text-teal-600":"text-stone-400"," font-bold"),children:"M"})})]})})},f=n(11163),p=function(t){var e=t.selectedFoods,n=t.setSelectedMeal,i=(0,f.useRouter)();return(0,r.jsxs)("div",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 bottom-8 w-52 bg-teal-600 rounded-3xl p-2",onClick:function(){n(e),i.push("/mealDetails")},children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center cursor-pointer",children:[(0,r.jsx)("p",{className:"text-gray-200 mr-1 text-lg font-light",children:"".concat(e.reduce((function(t,e){return t+(0,a.I)(e.attributes.calories,Number.parseInt(e.attributes.portionSize))}),0).toFixed(0)," kcal,")}),(0,r.jsx)("p",{className:"text-gray-200 text-lg font-light",children:"".concat(e.reduce((function(t,e){return t+(0,a.I)(e.attributes.proteins,Number.parseInt(e.attributes.portionSize))}),0).toFixed(1)," p")})]}),(0,r.jsx)("div",{className:"flex flex-row items-center justify-center cursor-pointer",children:(0,r.jsx)("p",{className:"text-white",children:"Open meal details"})})]})},x=n(56239),h=function(t){var e=t.clearMeal;return(0,r.jsx)("div",{className:"fixed bottom-0 left-4 bottom-8 bg-gray-400 rounded-full p-2 cursor-pointer",onClick:e,children:(0,r.jsx)(x.rFk,{width:"20px",height:"20px",color:"#fff"})})},m=n(62709);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(){var t=(0,o.useContext)(m.k),e=(t.selectedMeal,t.setSelectedMeal),n=(0,i.M)().data,a=(0,o.useState)(l.a.MAIN),s=a[0],f=a[1],x=(0,o.useState)(""),v=x[0],g=x[1],y=(0,o.useState)([]),j=y[0],w=y[1],N=null===n||void 0===n?void 0:n.filter((function(t){return t.attributes.name.toLowerCase().includes(v.toLowerCase())&&t.attributes.category===s})).sort((function(t,e){return j.find((function(e){return e.id===t.id}))&&!j.find((function(t){return t.id===e.id}))?-1:1}));return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"sticky top-0",children:[(0,r.jsx)(u.Z,{activeTab:u.M.HOME}),(0,r.jsx)(d,{selectedCategory:s,setSelectedCategory:f,searchText:v,setSearchText:g})]}),N&&(0,r.jsx)(c,{foods:N,handleFoodSelected:function(t){if(g(""),j.find((function(e){return e.id.toString()===t})))w(j.filter((function(e){return e.id.toString()!==t})));else{var e=null===n||void 0===n?void 0:n.find((function(e){return e.id.toString()===t}));e&&w(b(j).concat([e]))}},selectedFoods:j}),(null===j||void 0===j?void 0:j.length)>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{selectedFoods:j,setSelectedMeal:e}),(0,r.jsx)(h,{clearMeal:function(){return w([])}})]})]})}},23192:function(t,e,n){"use strict";var r;n.d(e,{a:function(){return r}}),function(t){t.BREAKFAST="breakfast",t.MAIN="main"}(r||(r={}))},48847:function(t,e,n){"use strict";n.d(e,{I:function(){return r},W:function(){return i}});var r=function(t,e){return t/100*e||0},i=function(t,e){return t.length>e?t.substring(0,e)+"...":t}}},function(t){t.O(0,[683,400,433,774,888,179],(function(){return e=45301,t(t.s=e);var e}));var e=t.O();_N_E=e}]);