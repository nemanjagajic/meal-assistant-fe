(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{99584:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/addFood",function(){return n(37440)}])},38123:function(t,e,n){"use strict";n.d(e,{M:function(){return o}});var o,i=n(85893),r=(n(67294),n(11163));!function(t){t.HOME="home",t.ADD_FOOD="addFood"}(o||(o={}));e.Z=function(t){var e=t.activeTab,n=(0,r.useRouter)();return(0,i.jsxs)("nav",{className:"flex flex-row bg-teal-600 p-4",children:[(0,i.jsx)("div",{className:"text-white pl-2 pr-3 cursor-pointer ".concat(e===o.HOME&&"font-bold"),onClick:function(){return n.replace("/")},children:"Food"}),(0,i.jsx)("div",{className:"text-white pl-2 pr-3 cursor-pointer ".concat(e===o.ADD_FOOD&&"font-bold"),onClick:function(){return n.push("/addFood")},children:"Add food"})]})}},9145:function(t,e,n){"use strict";n.d(e,{u:function(){return y},M:function(){return b}});var o=n(34051),i=n.n(o),r=n(88767),s=n(9669),a=n.n(s),c={baseURL:"http://46.101.119.178:1337",responseType:"json"},u=function(t,e){Object.keys(e).forEach((function(n){t.defaults.headers[n]=e[n]}))},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,e=a().create(t),n=localStorage.getItem("token"),o={accept:"application/json",authorization:""};return n&&(o.authorization=n),u(e,o),e}();function l(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(o,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function s(t){l(r,o,i,s,a,"next",t)}function a(t){l(r,o,i,s,a,"throw",t)}s(void 0)}))}}var p="/api/foods",f=function(){var t=d(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.get(p);case 3:return e=t.sent,n=e.data,t.abrupt("return",n.data);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=d(i().mark((function t(e){var n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.post(p,e);case 3:return n=t.sent,o=n.data,t.abrupt("return",o.data);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();function m(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(o,i)}var b=function(){var t=(0,r.useQuery)("foods",f);return{data:t.data,error:t.error,isLoading:t.isLoading,isFetching:t.isFetching}},y=function(t){var e,n=(0,r.useQueryClient)(),o=(0,r.useMutation)(v,{onSuccess:(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.invalidateQueries("foods");case 2:null===t||void 0===t||t();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(t){m(r,o,i,s,a,"next",t)}function a(t){m(r,o,i,s,a,"throw",t)}s(void 0)}))})});return{mutate:o.mutate,isLoading:o.isLoading}}},37440:function(t,e,n){"use strict";n.r(e);var o=n(85893),i=n(67294),r=n(38123),s=n(23192),a=n(59936),c=n(9145),u=n(11163),h=n(48847);e.default=function(){var t=(0,u.useRouter)(),e=(0,c.u)((function(){return t.replace("/")})),n=e.mutate,l=e.isLoading,d=(0,i.useState)(""),p=d[0],f=d[1],v=(0,i.useState)(0),m=v[0],b=v[1],y=(0,i.useState)(0),g=y[0],w=y[1],x=(0,i.useState)(""),k=x[0],M=x[1],C=(0,i.useState)(s.a.MAIN),S=C[0],N=C[1],j=(0,i.useState)(!1),D=j[0],E=j[1],T=!!p&&!!m&&!!g&&!!k&&!!S;return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"sticky top-0",children:(0,o.jsx)(r.Z,{activeTab:r.M.ADD_FOOD})}),(0,o.jsxs)("div",{className:"flex flex-col w-4/5 md:w-1/2 m-auto mt-8",children:[(0,o.jsx)("input",{className:"border p-2 rounded-xl focus:outline-none mb-4",value:p,onChange:function(t){return f(t.target.value)},placeholder:"Name"}),(0,o.jsx)("input",{className:"border p-2 rounded-xl focus:outline-none mb-4",value:m||"",onChange:function(t){return b(Number.parseInt(t.target.value)||0)},placeholder:"Calories"}),(0,o.jsx)("input",{type:"number",className:"border p-2 rounded-xl focus:outline-none mb-4",value:g||"",onChange:function(t){return w(Number.parseFloat(t.target.value)||0)},placeholder:"Proteins"}),(0,o.jsx)("input",{className:"border p-2 rounded-xl focus:outline-none mb-4",value:k||"",onChange:function(t){return M(t.target.value)},placeholder:"Portion size"}),(0,o.jsxs)("select",{name:"category",className:"border p-2 rounded-xl focus:outline-none mb-4 appearance-none cursor-pointer",onChange:function(t){return N(t.target.value)},value:S,children:[(0,o.jsx)("option",{value:s.a.MAIN,children:"Main"}),(0,o.jsx)("option",{value:s.a.BREAKFAST,children:"Breakfast"})]}),(0,o.jsxs)("div",{className:"flex flex-row p-2 mb-4",children:[(0,o.jsx)("p",{className:"mr-4",children:"Is base food: "}),(0,o.jsx)(a.default,{onChange:function(){return E(!D)},checked:D,onColor:"#0d9488",offColor:"#9ca3af"})]}),(0,o.jsx)("p",{className:"text-center text-gray-600 h-4 mb-2",children:T&&"For the given size: ".concat((0,h.I)(m,Number.parseInt(k)).toFixed(0)," kcal, \n        ").concat((0,h.I)(g,Number.parseInt(k)).toFixed(1),"  p")}),(0,o.jsx)("div",{onClick:function(){!l&&T&&n({data:{name:p,calories:m,proteins:g,category:S,isBase:D,portionSize:k}})},className:"\n           flex items-center justify-center w-40 h-12\n           rounded-3xl m-auto mt-4 text-white\n           ".concat(T?"cursor-pointer bg-teal-600":"cursor-auto bg-gray-400"),children:"Add food"})]})]})}},23192:function(t,e,n){"use strict";var o;n.d(e,{a:function(){return o}}),function(t){t.BREAKFAST="breakfast",t.MAIN="main"}(o||(o={}))},48847:function(t,e,n){"use strict";n.d(e,{I:function(){return o},W:function(){return i}});var o=function(t,e){return t/100*e||0},i=function(t,e){return t.length>e?t.substring(0,e)+"...":t}},57737:function(t,e,n){var o=n(67294);function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var r=o.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},o.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),s=o.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},o.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function a(t){if(7===t.length)return t;for(var e="#",n=1;n<4;n+=1)e+=t[n]+t[n];return e}function c(t,e,n,o,i){return function(t,e,n,o,i){var r=(t-n)/(e-n);if(0===r)return o;if(1===r)return i;for(var s="#",a=1;a<6;a+=2){var c=parseInt(o.substr(a,2),16),u=parseInt(i.substr(a,2),16),h=Math.round((1-r)*c+r*u).toString(16);1===h.length&&(h="0"+h),s+=h}return s}(t,e,n,a(o),a(i))}var u=function(t){function e(e){t.call(this,e);var n=e.height,o=e.width,i=e.checked;this.t=e.handleDiameter||n-2,this.i=Math.max(o-n,o-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={h:i?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.M=this.M.bind(this),this.m=this.m.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.componentDidMount=function(){this.W=!0},e.prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},e.prototype.componentWillUnmount=function(){this.W=!1},e.prototype.I=function(t){this.H.focus(),this.setState({R:t,j:!0,B:Date.now()})},e.prototype.L=function(t){var e=this.state,n=e.R,o=e.h,i=(this.props.checked?this.i:this.o)+t-n;e.N||t===n||this.setState({N:!0});var r=Math.min(this.i,Math.max(this.o,i));r!==o&&this.setState({h:r})},e.prototype.U=function(t){var e=this.state,n=e.h,o=e.N,i=e.B,r=this.props.checked,s=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var a=Date.now()-i;(!o||a<250||r&&n<=s||!r&&n>=s)&&this.A(t),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},e.prototype.p=function(t){t.preventDefault(),"number"==typeof t.button&&0!==t.button||(this.I(t.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.g))},e.prototype.v=function(t){t.preventDefault(),this.L(t.clientX)},e.prototype.g=function(t){this.U(t),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.g)},e.prototype.k=function(t){this.X=null,this.I(t.touches[0].clientX)},e.prototype.M=function(t){this.L(t.touches[0].clientX)},e.prototype.m=function(t){t.preventDefault(),this.U(t)},e.prototype.$=function(t){Date.now()-this.l>50&&(this.A(t),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},e.prototype.C=function(){this.u=Date.now()},e.prototype.D=function(){this.setState({j:!0})},e.prototype.O=function(){this.setState({j:!1})},e.prototype.S=function(t){this.H=t},e.prototype.T=function(t){t.preventDefault(),this.H.focus(),this.A(t),this.W&&this.setState({j:!1})},e.prototype.A=function(t){var e=this.props;(0,e.onChange)(!e.checked,t,e.id)},e.prototype.render=function(){var t=this.props,e=t.checked,n=t.disabled,r=t.className,s=t.offColor,a=t.onColor,u=t.offHandleColor,h=t.onHandleColor,l=t.checkedIcon,d=t.uncheckedIcon,p=t.checkedHandleIcon,f=t.uncheckedHandleIcon,v=t.boxShadow,m=t.activeBoxShadow,b=t.height,y=t.width,g=t.borderRadius,w=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&-1===e.indexOf(o)&&(n[o]=t[o]);return n}(t,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),x=this.state,k=x.h,M=x.N,C=x.j,S={position:"relative",display:"inline-block",textAlign:"left",opacity:n?.5:1,direction:"ltr",borderRadius:b/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},N={height:b,width:y,margin:Math.max(0,(this.t-b)/2),position:"relative",background:c(k,this.i,this.o,s,a),borderRadius:"number"==typeof g?g:b/2,cursor:n?"default":"pointer",WebkitTransition:M?null:"background 0.25s",MozTransition:M?null:"background 0.25s",transition:M?null:"background 0.25s"},j={height:b,width:Math.min(1.5*b,y-(this.t+b)/2+1),position:"relative",opacity:(k-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:M?null:"opacity 0.25s",MozTransition:M?null:"opacity 0.25s",transition:M?null:"opacity 0.25s"},D={height:b,width:Math.min(1.5*b,y-(this.t+b)/2+1),position:"absolute",opacity:1-(k-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:M?null:"opacity 0.25s",MozTransition:M?null:"opacity 0.25s",transition:M?null:"opacity 0.25s"},E={height:this.t,width:this.t,background:c(k,this.i,this.o,u,h),display:"inline-block",cursor:n?"default":"pointer",borderRadius:"number"==typeof g?g-1:"50%",position:"absolute",transform:"translateX("+k+"px)",top:Math.max(0,(b-this.t)/2),outline:0,boxShadow:C?m:v,border:0,WebkitTransition:M?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:M?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:M?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},T={height:this.t,width:this.t,opacity:Math.max(2*(1-(k-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:M?null:"opacity 0.25s",MozTransition:M?null:"opacity 0.25s",transition:M?null:"opacity 0.25s"},I={height:this.t,width:this.t,opacity:Math.max(2*((k-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:M?null:"opacity 0.25s",MozTransition:M?null:"opacity 0.25s",transition:M?null:"opacity 0.25s"};return o.createElement("div",{className:r,style:S},o.createElement("div",{className:"react-switch-bg",style:N,onClick:n?null:this.T,onMouseDown:function(t){return t.preventDefault()}},l&&o.createElement("div",{style:j},l),d&&o.createElement("div",{style:D},d)),o.createElement("div",{className:"react-switch-handle",style:E,onClick:function(t){return t.preventDefault()},onMouseDown:n?null:this.p,onTouchStart:n?null:this.k,onTouchMove:n?null:this.M,onTouchEnd:n?null:this.m,onTouchCancel:n?null:this.O},f&&o.createElement("div",{style:T},f),p&&o.createElement("div",{style:I},p)),o.createElement("input",i({},{type:"checkbox",role:"switch","aria-checked":e,checked:e,disabled:n,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},w,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},e}(o.Component);u.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:r,checkedIcon:s,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},e.default=u},59936:function(t,e,n){t.exports=n(57737)}},function(t){t.O(0,[400,774,888,179],(function(){return e=99584,t(t.s=e);var e}));var e=t.O();_N_E=e}]);